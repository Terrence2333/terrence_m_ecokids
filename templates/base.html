<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TERRENCE M - {% block title %}{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <style>
        :root { --gold: #d4af37; --bright-gold: #f9e272; --dark: #050505; --alert: rgba(255, 0, 0, 0.2); }
        * { cursor: none !important; }
        body { background: var(--dark); color: #fff; font-family: 'Rajdhani', sans-serif; margin: 0; overflow: hidden; }
        
        /* CAPAS T√âCNICAS */
        #particles-js, .bg-mesh, .perimeter-scan, .data-frames { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none !important; z-index: 1; }
        .bg-mesh { background-image: radial-gradient(circle, rgba(212, 175, 55, 0.05) 1px, transparent 1px); background-size: 30px 30px; z-index: 0; }
        .perimeter-scan { border: 20px solid rgba(212,175,55,0.02); z-index: 2; box-shadow: inset 0 0 100px #000; }
        
        /* DATA FRAMES (COORDENADAS DE SEGURIDAD) */
        .data-frames::before { content: "LAT: -2.1701 | LON: -79.9223"; position: absolute; top: 10px; left: 10px; color: var(--gold); font-size: 10px; font-family: 'Orbitron'; opacity: 0.5; }
        .data-frames::after { content: "ENC: AES-256 | STATUS: SECURE"; position: absolute; bottom: 40px; left: 10px; color: var(--gold); font-size: 10px; font-family: 'Orbitron'; opacity: 0.5; }

        /* CURSOR L√ÅSER AVANZADO */
        #custom-cursor { position: fixed; width: 30px; height: 30px; border: 1px solid var(--gold); border-radius: 2px; pointer-events: none; z-index: 10000; transform: translate(-50%, -50%); transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        #cursor-dot { position: fixed; width: 4px; height: 4px; background: #fff; border-radius: 50%; pointer-events: none; z-index: 10001; transform: translate(-50%, -50%); box-shadow: 0 0 15px var(--gold); }

        /* NAVEGACI√ìN T√ÅCTICA */
        nav { background: rgba(0,0,0,0.98); border-bottom: 1px solid var(--gold); padding: 15px; display: flex; justify-content: center; position: sticky; top: 0; z-index: 5000; backdrop-filter: blur(10px); }
        nav a { color: var(--gold); text-decoration: none; margin: 0 25px; font-family: 'Orbitron'; font-size: 0.7rem; letter-spacing: 3px; pointer-events: auto !important; position: relative; }
        nav a::after { content: ''; position: absolute; width: 0; height: 1px; bottom: -5px; left: 0; background: #fff; transition: 0.4s; }
        nav a:hover::after { width: 100%; }

        .container { padding: 80px 20px; max-width: 1200px; margin: auto; text-align: center; position: relative; z-index: 100; overflow-y: auto; max-height: 85vh; }
        .glass-panel { background: rgba(5, 5, 5, 0.8); border-left: 5px solid var(--gold); padding: 50px; border-radius: 0; backdrop-filter: blur(25px); pointer-events: auto !important; box-shadow: 20px 20px 60px #000; }
        
        .btn-divine { background: transparent; color: var(--gold); padding: 15px 40px; text-decoration: none; font-family: 'Orbitron'; border: 1px solid var(--gold); transition: 0.5s; display: inline-block; cursor: pointer; pointer-events: auto !important; text-transform: uppercase; letter-spacing: 2px; }
        .btn-divine:hover { background: var(--gold); color: #000; transform: skewX(-10deg); }

        /* AUDIO Y CHAT TERMINAL */
        #music-control { position: fixed; bottom: 85px; right: 25px; z-index: 6000; pointer-events: auto !important; }
        #chat-trigger { position: fixed; bottom: 25px; right: 25px; width: 55px; height: 55px; background: var(--gold); z-index: 6000; cursor: pointer; display: flex; justify-content: center; align-items: center; pointer-events: auto !important; clip-path: polygon(0% 15%, 15% 0%, 100% 0%, 100% 85%, 85% 100%, 0% 100%); }
        #chatbot-ui { position: fixed; bottom: 25px; right: 25px; width: 320px; height: 450px; background: #000; border: 1px solid var(--gold); z-index: 6001; display: none; flex-direction: column; pointer-events: auto !important; }
        
        /* PRELOADER MILITAR */
        #loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .scan-bar { width: 200px; height: 2px; background: #222; margin-top: 20px; position: relative; }
        .scan-bar::after { content: ''; position: absolute; width: 40px; height: 100%; background: var(--gold); animation: loading 1.5s infinite; }
        @keyframes loading { 0% { left: 0; } 100% { left: 160px; } }

        footer { position: fixed; bottom: 0; width: 100%; padding: 10px; color: #555; font-size: 0.55rem; letter-spacing: 8px; z-index: 5; text-align: center; background: rgba(0,0,0,0.9); }
    </style>
</head>
<body oncontextmenu="alertSystem()">
    <div id="loader">
        <h1 style="color:var(--gold); font-family:'Orbitron'; font-size:1rem; letter-spacing:8px;">IDENTITY VERIFICATION</h1>
        <div class="scan-bar"></div>
    </div>
    <div class="data-frames"></div>
    <div class="perimeter-scan"></div>
    <div id="custom-cursor"></div><div id="cursor-dot"></div>
    <div id="particles-js"></div><div class="bg-mesh"></div>

    <audio id="bg-audio" loop preload="auto"><source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-15.mp3" type="audio/mpeg"></audio>

    <nav>
        <a href="/" onmouseover="focusCursor()">HOME</a>
        <a href="/servicios" onmouseover="focusCursor()">UNIDADES</a>
        <a href="/proyectos" onmouseover="focusCursor()">NODOS</a>
        <a href="/about" onmouseover="focusCursor()">IMPERIO</a>
        <a href="/pagos" onmouseover="focusCursor()">PAGOS</a>
    </nav>

    <div id="music-control">
        <button onclick="toggleMusic()" class="btn-divine" id="music-btn" style="padding: 5px 12px; font-size: 9px;">LINK: DISCONNECTED</button>
    </div>

    <div class="container">{% block content %}{% endblock %}</div>

    <div id="chat-trigger" onclick="toggleChat()">üõ°Ô∏è</div>
    <div id="chatbot-ui">
        <div style="background:var(--gold); color:#000; padding:12px; font-family:'Orbitron'; font-size:0.7rem; font-weight:bold;">SECURE TERMINAL v6.5</div>
        <div id="chat-messages" style="flex:1; padding:15px; overflow-y:auto; color:#00ff00; font-family:monospace; font-size:0.8rem; line-height:1.5;">> SYSTEM BOOT SUCCESSFUL...</div>
        <input type="text" id="chat-input" placeholder="ENTER CLEARANCE..." onkeypress="handleChat(event)" style="background:#0a0a0a; border:none; border-top:1px solid var(--gold); color:#fff; padding:15px; outline:none; font-family:monospace;">
    </div>

    <footer>GLOBAL SECURITY PROTOCOL | TERRENCE.M | LEVEL: OMNIPRESENT</footer>

    <script>
        window.onload = () => { 
            setTimeout(() => { document.getElementById('loader').style.display='none'; }, 1500);
            particlesJS("particles-js", { "particles": { "number": { "value": 100 }, "color": { "value": "#d4af37" }, "opacity": 0.2, "size": { "value": 1 }, "line_linked": { "enable": true, "distance": 120, "color": "#d4af37", "opacity": 0.1 }, "move": { "enable": true, "speed": 1 } } });
        };
        
        document.addEventListener('mousemove', (e) => {
            const cursor = document.getElementById('custom-cursor');
            const dot = document.getElementById('cursor-dot');
            cursor.style.left = e.clientX + 'px'; cursor.style.top = e.clientY + 'px';
            dot.style.left = e.clientX + 'px'; dot.style.top = e.clientY + 'px';
        });

        function focusCursor() { document.getElementById('custom-cursor').style.transform = 'translate(-50%, -50%) rotate(45deg) scale(1.5)'; }
        document.addEventListener('mouseout', () => { document.getElementById('custom-cursor').style.transform = 'translate(-50%, -50%) rotate(0deg) scale(1)'; });

        const audio = document.getElementById('bg-audio');
        function toggleMusic() {
            const btn = document.getElementById('music-btn');
            if (audio.paused) { audio.play(); btn.innerHTML = "LINK: ACTIVE"; btn.style.borderColor = "#00ff00"; }
            else { audio.pause(); btn.innerHTML = "LINK: DISCONNECTED"; btn.style.borderColor = "var(--gold)"; }
        }

        function toggleChat() { const ui = document.getElementById('chatbot-ui'); ui.style.display = ui.style.display === 'flex' ? 'none' : 'flex'; }
        function handleChat(e) {
            if (e.key === 'Enter') {
                const input = document.getElementById('chat-input');
                const msgs = document.getElementById('chat-messages');
                msgs.innerHTML += `<p style="color:var(--gold)">> CMD: ${input.value}</p>`;
                setTimeout(() => { msgs.innerHTML += `<p>> ACCESS GRANTED. EXECUTING PROTOCOL...</p>`; msgs.scrollTop = msgs.scrollHeight; }, 500);
                input.value = "";
            }
        }
        function alertSystem() { document.body.style.background = "maroon"; setTimeout(()=> { document.body.style.background = "#050505"; }, 200); }
    </script>
</body>
</html>