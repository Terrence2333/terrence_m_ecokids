{% extends "base.html" %}
{% block content %}
<canvas id="noise-canvas" style="position: fixed; inset: 0; z-index: 20000; pointer-events: none; opacity: 0; transition: opacity 0.1s;"></canvas>
<div id="boot-screen" style="position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; flex-direction: column; justify-content: center; align-items: center; font-family: 'Orbitron', sans-serif; color: #d4af37;">
    <div id="loader-ring" style="width: 120px; height: 120px; border: 2px solid #ff4500; border-radius: 50%; animation: spin 0.5s linear infinite;"></div>
    <p style="letter-spacing: 10px; margin-top: 20px; font-size: 0.7rem;">ESTABLECIENDO ENLACE CON RENDER...</p>
</div>
<div id="main-interface" style="padding: 50px; opacity: 0; visibility: hidden; transition: opacity 1s;">
    <h1 style="color: #d4af37; font-family: 'Orbitron'; font-weight: 900;">TERRENCE M - LIVE SYSTEM</h1>
    <div style="background: rgba(255,69,0,0.1); border: 1px solid #ff4500; padding: 25px; color: #fff; font-family: monospace;">
        <p>[ SISTEMA OPERATIVO EN LÍNEA ]</p>
        <p>> PROTOCOLO DE PÁNICO: [ESC] ACTIVO</p>
        <p>> RADAR SÍSMICO: CALIBRADO</p>
    </div>
</div>
<script>
    window.addEventListener('keydown', (e) => { 
        if (e.key === "Escape") {
            document.getElementById('noise-canvas').style.opacity = "1";
            setTimeout(() => { location.reload(); }, 500);
        }
    });
    window.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => {
            document.getElementById('boot-screen').style.display = 'none';
            document.getElementById('main-interface').style.visibility = 'visible';
            document.getElementById('main-interface').style.opacity = '1';
        }, 1500);
    });
</script>
{% endblock %}
{% extends "base.html" %}
{% block content %}
<style>
    /* RESET Y BASES */
    body { background: #000; margin: 0; overflow: hidden; font-family: 'Orbitron', sans-serif; color: #fff; }
    
    /* CAPAS DE PROFUNDIDAD */
    #master-bg { position: fixed; inset: 0; z-index: 1; background: #000; }
    #main-interface { position: relative; z-index: 10; padding: 100px 5% 0; display: grid; grid-template-columns: 1.2fr 1fr; gap: 30px; height: 100vh; }
    #chat-container { position: fixed; bottom: 20px; right: 20px; width: 350px; background: rgba(10,10,10,0.95); border: 1px solid #ff4500; z-index: 100; box-shadow: 0 0 20px #000; }
    nav { position: fixed; top: 0; width: 100%; height: 65px; background: rgba(0,0,0,0.9); border-bottom: 2px solid #d4af37; z-index: 1000; display: flex; justify-content: space-around; align-items: center; letter-spacing: 5px; color: #d4af37; font-size: 0.75rem; }

    /* ANIMACIONES */
    @keyframes laserSweep { 0% { top: -5%; opacity: 0; } 50% { opacity: 1; } 100% { top: 105%; opacity: 0; } }
    .laser { position: absolute; width: 100%; height: 2px; background: #ff4500; box-shadow: 0 0 15px #ff4500; z-index: 2; animation: laserSweep 5s linear infinite; }
    @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 10px #0055ff; } 50% { transform: scale(1.1); box-shadow: 0 0 25px #0055ff; } 100% { transform: scale(1); box-shadow: 0 0 10px #0055ff; } }
</style>

<div id="master-bg">
    <div class="laser"></div>
    <canvas id="main-canvas" style="opacity: 0.4;"></canvas>
</div>

<nav>
    <span>HOME</span><span>UNIDADES</span><span>NODOS</span><span>IMPERIO</span><span>PAGOS</span>
</nav>

<div id="main-interface">
    <div>
        <h1 style="font-size: 4rem; margin: 0; letter-spacing: 12px; font-weight: 900; text-shadow: 0 0 20px rgba(255,255,255,0.2);">TERRENCE M</h1>
        <div style="color: #d4af37; line-height: 2; font-size: 0.85rem; margin-top: 30px; font-family: monospace;">
            <p>> KERNEL: 0x8899-OMNI-V3</p>
            <p>INGENIERÍA SUSTENTABLE DE ÉLITE</p>
            <p>> STATUS: <span style="color: #0f0;">STABLE</span></p>
            <p>> COORD_X: <span id="coord-lat">4911</span> | COORD_Y: <span id="coord-lon">1552</span></p>
            <p>> PROTECTION: ACTIVE</p>
            <a href="#" style="color: #3366ff; text-decoration: none; border-bottom: 1px solid #3366ff;">ACCESS_CORE</a>
        </div>
    </div>

    <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 30px;">
        <div style="border: 1px solid #d4af37; padding: 20px; background: rgba(10,10,10,0.9); width: 280px; text-align: center;">
            <div style="width: 150px; height: 150px; border-radius: 50%; border: 4px solid #0f0; overflow: hidden; margin: 0 auto; background: #111;">
                <video id="webcam" autoplay playsinline muted style="width:100%; height:100%; object-fit:cover;"></video>
            </div>
            <p style="color: #0f0; font-size: 0.6rem; margin-top: 15px; letter-spacing: 2px;">ID: DIRECTOR_TERRENCE_M</p>
        </div>
        <div style="display: flex; gap: 30px;">
            <div style="text-align: center;">
                <div style="font-size: 1.8rem; color: #d4af37; font-weight: 900;">4500+</div>
                <div style="font-size: 0.5rem; color: #666;">CO2 REDUCIDO</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 1.8rem; color: #d4af37; font-weight: 900;">1250+</div>
                <div style="font-size: 0.5rem; color: #666;">MW GENERADOS</div>
            </div>
        </div>
    </div>
</div>

<div style="position: fixed; bottom: 85px; left: 5%; width: 280px; border: 2px solid #d4af37; padding: 12px; background: rgba(0,0,0,0.8); text-align: center; z-index: 50;">
    <h2 style="color: #fff; margin: 0; font-size: 1rem; letter-spacing: 5px;">SHIELD: STANDBY</h2>
</div>

<div style="position: fixed; bottom: 25px; left: 5%; width: 50px; height: 50px; background: #0055ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite; cursor: pointer; z-index: 1001;">
    <div style="width: 20px; height: 20px; border: 2px solid #fff; border-top: none; border-radius: 0 0 10px 10px;"></div>
</div>

<div id="chat-container">
    <div style="background: #ff4500; color: #000; padding: 5px 10px; font-weight: 900; font-size: 0.7rem;">COMMANDER_LOG</div>
    <div id="chat-box" style="height:120px; overflow-y:auto; padding:10px; font-size:0.7rem; color:#fff; font-family: monospace;"></div>
    <canvas id="seismograph" style="width: 100%; height: 35px; background: #000; border-top: 1px solid #222;"></canvas>
    <div style="display: flex; border-top: 1px solid #ff4500;">
        <input type="text" id="user-input" placeholder="ORDEN..." style="flex: 1; background:#000; border:none; color:#ff4500; padding:10px; font-family: monospace; outline: none;">
        <button onclick="sendMsg()" style="background:#ff4500; border:none; color:#000; font-weight:bold; padding: 0 15px; cursor: pointer;">EXE</button>
    </div>
</div>

<script>
    // CAMARA
    navigator.mediaDevices.getUserMedia({ video: true }).then(s => { document.getElementById('webcam').srcObject = s; }).catch(e => {});

    // RADAR GLOBO
    const canvas = document.getElementById('main-canvas'), ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let globeRot = 0;
    function draw() {
        ctx.fillStyle = "black"; ctx.fillRect(0,0,canvas.width, canvas.height);
        const cX = canvas.width/2, cY = canvas.height/2, r = 280;
        ctx.strokeStyle = "rgba(212,175,55,0.15)";
        for(let i=0; i<18; i++) {
            ctx.beginPath(); ctx.ellipse(cX, cY, Math.abs(r * Math.sin(globeRot + i)), r, 0, 0, Math.PI*2); ctx.stroke();
        }
        globeRot += 0.002; requestAnimationFrame(draw);
    }
    draw();

    // SISMOGRAFO
    const sCanvas = document.getElementById('seismograph'), sCtx = sCanvas.getContext('2d');
    let xS = 0;
    function drawSeismo() {
        sCtx.fillStyle = "rgba(0,0,0,0.1)"; sCtx.fillRect(0,0,sCanvas.width, sCanvas.height);
        sCtx.strokeStyle = "#ff4500"; sCtx.beginPath(); sCtx.moveTo(xS, 17);
        sCtx.lineTo(xS+2, 17+(Math.random()*16-8)); sCtx.stroke(); xS += 2;
        if(xS > sCanvas.width) xS = 0;
        requestAnimationFrame(drawSeismo);
    }
    drawSeismo();

    // CHAT
    function sendMsg() {
        const i = document.getElementById('user-input'), b = document.getElementById('chat-box');
        if(!i.value) return;
        b.innerHTML += `<div style="color:#0f0; margin-bottom: 5px;">> ${i.value}</div>`;
        i.value = ""; b.scrollTop = b.scrollHeight;
    }

    // COORDENADAS
    setInterval(() => {
        document.getElementById('coord-lat').innerText = Math.floor(1000 + Math.random()*8000);
        document.getElementById('coord-lon').innerText = Math.floor(1000 + Math.random()*8000);
    }, 2000);
</script>
{% endblock %}